<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>School Election 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Quicksand', sans-serif;
    }
    .selected {
      border: 4px solid #FFD700;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
      transform: scale(1.02);
      transition: all 0.3s ease;
    }
    .candidate-img {
      width: 100%;
      height: 300px;
      object-fit: contain;
      border-radius: 0.5rem;
    }
    .candidate-card-logo {
      width: 80px;
      height: 80px;
      display: inline-block;
      vertical-align: middle;
      margin-right: 0.5rem;
    }
    .card-default {
  background-color: white !important;
  color: black !important;
  border: 2px solid #FFD700;
  transition: all 0.3s ease;
}
.card-default:hover {
  box-shadow: 0 4px 20px rgba(255, 215, 0, 0.2);
  transform: scale(1.02);
}

    .fade-enter {
    opacity: 0;
    transform: translateY(20px);
  }
  .fade-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.5s ease;
  }
  .fade-exit {
    opacity: 1;
    transform: translateY(0);
  }
  .fade-exit-active {
    opacity: 0;
    transform: translateY(-20px);
    transition: all 0.5s ease;
  }
  </style>
</head>
<body class="bg-black text-white font-sans">
  <div class="max-w-7xl mx-auto py-10 px-4">
    <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-8">
  <img src="images/logo.png" alt="School Logo" class="w-32 h-32 md:w-40 md:h-40 object-contain" />
  <div class="text-center md:text-left">
    <h1 class="text-5xl md:text-6xl font-extrabold text-yellow-400 leading-tight">Sarojani Public School</h1>
    <p class="text-2xl md:text-3xl text-yellow-200 mt-2">School Election 2025</p>
  </div>
</div>
    <!-- Step 1 -->
    <div id="step1" class="transition-all duration-500">
      <h2 class="text-2xl font-semibold text-center text-yellow-300 mb-6">Select School Captain</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div onclick="selectCandidate('schoolCaptain', this, 'Sai Khubalkar')" class="card-default cursor-pointer bg-white rounded-xl p-6 text-center">
          <img class="w-full h-72 object-contain rounded-xl mb-4" src="images/c1.png" alt="Candidate 1">
          <h3 class="font-bold text-lg"><img src="images/wings.jpg" class="candidate-card-logo" />Sai Khubalkar</h3>
          <p class="text-sm italic">“Academic excellence”</p>
        </div>
        <div onclick="selectCandidate('schoolCaptain', this, 'Bhoriyan Thakare')" class="card-default cursor-pointer bg-white rounded-xl p-6 text-center">
          <img class="w-full h-72 object-contain rounded-xl mb-4" src="images/c2.png" alt="Candidate 2">
          <h3 class="font-bold text-lg"><img src="images/book.jpg" class="candidate-card-logo" />Bhoriyan Thakare</h3>
          <p class="text-sm italic">“Holistic development”</p>
        </div>
        <div onclick="selectCandidate('schoolCaptain', this, 'Vamika Soni')" class="card-default cursor-pointer bg-white rounded-xl p-6 text-center">
          <img class="w-full h-72 object-contain rounded-xl mb-4" src="images/c3.png" alt="Candidate 3">
          <h3 class="font-bold text-lg"><img src="images/Trophy.png" class="candidate-card-logo" />Vamika Soni</h3>
          <p class="text-sm italic">“Sports promotion”</p>
        </div>
        <div onclick="selectCandidate('schoolCaptain', this, 'Konark Dhonge')" class="card-default cursor-pointer bg-white rounded-xl p-6 text-center">
          <img class="w-full h-72 object-contain rounded-xl mb-4" src="images/c4.png" alt="Candidate 4">
          <h3 class="font-bold text-lg"><img src="images/Torch.png" class="candidate-card-logo" />Konark Dhonge</h3>
          <p class="text-sm italic">“Inclusivity & culture”</p>
        </div>
      </div>
      <div class="text-center mt-8 space-x-4">
        <button onclick="nextStep(1)" class="bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-2 rounded">Next → Choose House</button>
      </div>
    </div>

    <!-- Step 2 -->
    <div id="step2" class="hidden transition-all duration-500">
      <h2 class="text-2xl font-semibold text-center text-yellow-300 mb-6">Select Your House</h2>
     <div class="grid grid-cols-2 gap-6 max-w-xl mx-auto font-bold">
      <div onclick="selectHouse(this, 'Red House')" class="cursor-pointer p-6 bg-white border-4 border-red-600 rounded-lg text-center text-red-600 hover:shadow-md transition-all">Red House</div>
      <div onclick="selectHouse(this, 'Blue House')" class="cursor-pointer p-6 bg-white border-4 border-blue-600 rounded-lg text-center text-blue-600 hover:shadow-md transition-all">Blue House</div>
      <div onclick="selectHouse(this, 'Green House')" class="cursor-pointer p-6 bg-white border-4 border-green-600 rounded-lg text-center text-green-600 hover:shadow-md transition-all">Green House</div>
      <div onclick="selectHouse(this, 'Yellow House')" class="cursor-pointer p-6 bg-white border-4 border-yellow-500 rounded-lg text-center text-yellow-500 hover:shadow-md transition-all">Yellow House</div>
     </div>
      <div class="text-center mt-8 space-x-4">
        <button onclick="previousStep(1)" class="bg-gray-700 text-white px-6 py-2 rounded">← Back</button>
        <button onclick="nextStep(2); updateHouseCandidates();" class="bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-2 rounded">Next → Choose House Captain</button>
      </div>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="hidden transition-all duration-500">
      <h2 class="text-2xl font-semibold text-center text-yellow-300 mb-6" id="houseTitle">House Captain Candidates</h2>
      <div id="houseCandidates" class="grid grid-cols-1 md:grid-cols-3 gap-6 justify-center"></div>
      <div class="text-center mt-8 space-x-4">
        <button onclick="previousStep(2)" class="bg-gray-700 text-white px-6 py-2 rounded">← Back</button>
        <button onclick="submitVotes()" class="bg-green-400 text-black px-6 py-2 rounded">Submit Votes</button>
      </div>
    </div>

    <!-- Step 4 -->
    <div id="step4" class="hidden transition-all duration-500">
      <div class="card-default p-6 max-w-xl mx-auto text-center selected">
        <div class="text-green-400 text-4xl mb-4">✔️</div>
        <h2 class="text-2xl font-semibold mb-2">Votes Submitted!</h2>
        <p class="mb-4">Thank you for participating. Your choices are listed below.</p>
        <div id="summary" class="mb-6 text-left inline-block"></div>
        <div class="flex flex-col items-center space-y-4 mt-6">
          <button onclick="downloadCSV()" class="bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-2 rounded">Download All Votes (CSV)</button>
          <button onclick="restart()" class="bg-gray-700 text-white px-6 py-2 rounded">Cast Another Vote</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const votes = [];
    let currentVote = {};

    const houseData = {  "Red House": [
        { name: "Veer Raut", img: "images/r1.png", vision: "Discipline & spirit" },
        { name: "Ram Badwaik", img: "images/r2.png", vision: "Team building" },
        { name: "Safal Kakde", img: "images/r3.png", vision: "Academic focus" }
      ],
      "Blue House": [
        { name: "Shreyansh Khandalkar", img: "images/b1.png", vision: "House spirit" },
        { name: "Abhas Talmale", img: "images/b2.png", vision: "Sports excellence" },
        { name: "Nawanshu Sonbarse", img: "images/b3.png", vision: "Academic leadership" }
      ],
      "Green House": [
        { name: "Aslesha Bondre", img: "images/g1.png", vision: "Environmental awareness" },
        { name: "Seeddhanti Motghare", img: "images/g2.png", vision: "Leadership through service" },
        { name: "Bhrunal Bele", img: "images/g3.png", vision: "Integrity & fairness" }
      ],
      "Yellow House": [
        { name: "Chirag Raut", img: "images/y1.png", vision: "Cultural enthusiasm" },
        { name: "Priyanshi Wadibhasme", img: "images/y2.png", vision: "Sportsmanship" },
        { name: "Yashaswi Choudhari", img: "images/y3.png", vision: "Academic innovation" }
      ]
   };

    function selectCandidate(role, element, candidate) {
      currentVote[role] = candidate;
      document.querySelectorAll(`#step${role === 'schoolCaptain' ? 1 : 3} .selected`).forEach(el => el.classList.remove('selected'));
      element.classList.add('selected');
    }

    function selectHouse(element, house) {
      currentVote.house = house;
      document.querySelectorAll('#step2 .selected').forEach(el => el.classList.remove('selected'));
      element.classList.add('selected');
      document.getElementById('houseTitle').textContent = `${house} Captain Candidates`;
    }

    function nextStep(step) {
  const current = document.getElementById(`step${step}`);
  const next = document.getElementById(`step${step + 1}`);

  current.classList.add('fade-exit-active');
  setTimeout(() => {
    current.classList.add('hidden');
    current.classList.remove('fade-exit-active');
    next.classList.remove('hidden');
    next.classList.add('fade-enter');
    setTimeout(() => {
      next.classList.add('fade-enter-active');
      setTimeout(() => next.classList.remove('fade-enter', 'fade-enter-active'), 500);
    }, 20);
  }, 500);
}

function previousStep(step) {
  const current = document.getElementById(`step${step + 1}`);
  const prev = document.getElementById(`step${step}`);

  current.classList.add('fade-exit-active');
  setTimeout(() => {
    current.classList.add('hidden');
    current.classList.remove('fade-exit-active');
    prev.classList.remove('hidden');
    prev.classList.add('fade-enter');
    setTimeout(() => {
      prev.classList.add('fade-enter-active');
      setTimeout(() => prev.classList.remove('fade-enter', 'fade-enter-active'), 500);
    }, 20);
  }, 500);
}

    function updateHouseCandidates() {
      const house = currentVote.house;
      const container = document.getElementById('houseCandidates');
      container.innerHTML = '';
      houseData[house].forEach(candidate => {
        const card = document.createElement('div');
        card.className = 'card-default cursor-pointer rounded-xl p-6 text-center';
        card.onclick = () => selectCandidate('houseCaptain', card, candidate.name);
        card.innerHTML = `
          <img src="${candidate.img}" alt="${candidate.name}" class="w-full h-72 object-contain rounded-xl mb-4" />
          <h3 class="font-bold text-lg">${candidate.name}</h3>
          <p class="text-sm italic">“${candidate.vision}”</p>
        `;
        container.appendChild(card);
      });
    }

    function submitVotes() {
      document.getElementById('step3').classList.add('hidden');
      document.getElementById('step4').classList.remove('hidden');
      document.getElementById('summary').innerHTML = `
        <p><strong>School Captain:</strong> ${currentVote.schoolCaptain}</p>
        <p><strong>${currentVote.house}:</strong> ${currentVote.houseCaptain}</p>
      `;
      votes.push(currentVote);
      currentVote = {};
    }

    function downloadCSV() {
      const counts = {};
      for (let vote of votes) {
        for (let key in vote) {
          const entry = `${key} - ${vote[key]}`;
          counts[entry] = (counts[entry] || 0) + 1;
        }
      }
      const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]);
      let csvContent = "data:text/csv;charset=utf-8,Role - Candidate,Vote Count\n" +
        sorted.map(e => `${e[0]},${e[1]}`).join("\n");

      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "election_results.csv");
      document.body.appendChild(link);
      link.click();
      link.remove();
    }

    function restart() {
  document.getElementById('step4').classList.add('hidden');
  document.getElementById('step1').classList.remove('hidden');
  document.getElementById('summary').innerHTML = '';
  document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
  currentVote = {};
}
  </script>
</body>
</html>
